;
; Copyright (c) Microsoft Corporation.  All rights reserved.
;
;
; Use of this source code is subject to the terms of the Microsoft end-user
;
; Copyright (c) Microsoft Corporation.  All rights reserved.
;
;
; Use of this source code is subject to the terms of the Microsoft end-user
; license agreement (EULA) under which you licensed this SOFTWARE PRODUCT.
; If you did not accept the terms of the EULA, you are not authorized to use
; this source code. For a copy of the EULA, please see the LICENSE.RTF on your
; install media.
;

IF BSP_SMDK2443_CFG
MEMORY
#define CHAIN_ADDRESS	81400000
#define CHAIN_LENGTH	00001000
; page pool
	#define PAGINGPOOLSIZE 00500000

	;pdwXIPLoc			00000000		81B2C000	FIXUPVAR
	pdwXIPLoc			00000000		$(CHAIN_ADDRESS)	FIXUPVAR

	dwDontUseChain		00000000		00000001           FIXUPVAR
	cbNKPagingPoolSize	00000000		$(PAGINGPOOLSIZE)  FIXUPVAR

	XIPKERNEL			80040000		001C0000	RAMIMAGE
	NK					80200000		01200000	RAMIMAGE
	CHAIN				$(CHAIN_ADDRESS)		00004000	RESERVED	

	RESERVE				8df00000		00080000
	RAM					8c200000		03C00000	RAM
	
;	NK      80200000  01E00000  RAMIMAGE
;	RAM     82000000  01E00000  RAM
;	FLASH   92000000  00100000  RESERVED

; Common RAM areas
	ARGS                8C020000  00000800  RESERVED
	SLEEP               8C028000  00002000	RESERVED
	EDBG                8C030000  00020000  RESERVED
	DISPLAY             8C100000  00100000  RESERVED    

CONFIG
    COMPRESSION=ON
    KERNELFIXUPS=ON

	; Multi-Region
	;
	AUTOSIZE=ON			;; AUTOSIZE is used to enable the following flags.
	RAM_AUTOSIZE=OFF
	ROM_AUTOSIZE=OFF	;; Modified by LEK... OFF->ON -> OFF
	DLLADDR_AUTOSIZE=ON
	
	XIPSCHAIN=$(CHAIN_ADDRESS)
	
	AUTOSIZE_ROMGAP=10000
	AUTOSIZE_DLLADDRGAP=0
	AUTOSIZE_DLLDATAADDRGAP=0
	AUTOSIZE_DLLCODEADDRGAP=0

IF IMGPROFILER   
    PROFILE=ON
ELSE
    PROFILE=OFF
ENDIF

;
; ROMFLAGS is a bitmask of options for the kernel
;   ROMFLAGS    0x0001      Disallow Paging
;   ROMFLAGS    0x0002      Not all KMode
;   ROMFLAGS    0x0010      Trust Module only
;
ROMFLAGS=0
;IF IMGTRUSTROMONLY
;    IF IMGNOTALLKMODE
;       ROMFLAGS=12
;    ELSE
;       ROMFLAGS=10
;    ENDIF
;ELSE
;    IF IMGNOTALLKMODE
;       ROMFLAGS=02
;    ELSE
;       ROMFLAGS=00
;    ENDIF
;ENDIF
;
;	ROMSTART = 80200000
;	ROMWIDTH = 32
;	ROMSIZE = 01900000

ENDIF

IF BSP_SMDK2450_CFG
MEMORY
IF IMGMULTIXIP !
IF WINCEDEBUG = retail
    NK      80200000  01d00000  RAMIMAGE
    RAM     81f00000  02100000  RAM
ELSE
    NK      80200000  02800000  RAMIMAGE
    RAM     82A00000  01500000  RAM
ENDIF    
    FLASH   92000000  00100000  RESERVED
ENDIF

IF IMGMULTIXIP
#define	CHAIN_ADDRESS	81D00000
#define	CHAIN_LENGTH	00001000

	TINYNK	80200000	00300000	RAMIMAGE
	NK 80500000	02900000	NANDIMAGE
;	NK		80900000	02000000	NANDIMAGE
	CHAIN		$(CHAIN_ADDRESS)	$(CHAIN_LENGTH)	RESERVED
	
	RAM		80500000	03B00000	RAM
	
	FLASH               92000000  00100000  RESERVED
ENDIF


; Common RAM areas
	ARGS                80020000  00000800  RESERVED
	SLEEP               80028000  00002000	RESERVED
	EDBG                80030000  00020000  RESERVED
	DISPLAY             80100000  00100000  RESERVED    
;	CF_DMA_BUF	    83FE0000  00020000  RESERVED
CONFIG

    COMPRESSION=ON
    KERNELFIXUPS=ON
    FSRAMPERCENT=10101010

IF IMGMULTIXIP
    ; Multi-Region
    ;
    AUTOSIZE=ON     ; AUTOSIZE is used to enable the following flags.
    RAM_AUTOSIZE=OFF
    ROM_AUTOSIZE=OFF
    DLLADDR_AUTOSIZE=ON

    XIPSCHAIN=$(CHAIN_ADDRESS)

    AUTOSIZE_ROMGAP=10000
    AUTOSIZE_DLLADDRGAP=0
    AUTOSIZE_DLLDATAADDRGAP=0
    AUTOSIZE_DLLCODEADDRGAP=0
ENDIF IMGMULTIXIP

IF IMGPROFILER
    PROFILE=ON
ENDIF

IF IMGPROFILER !
    PROFILE=OFF
ENDIF

IF IMGTRUSTROMONLY
    IF IMGNOTALLKMODE
        ROMFLAGS=12
    ENDIF
    IF IMGNOTALLKMODE !
        ROMFLAGS=10
    ENDIF
ENDIF

IF IMGTRUSTROMONLY !
    IF IMGNOTALLKMODE
        ROMFLAGS=2
    ENDIF
    IF IMGNOTALLKMODE !
        ROMFLAGS=0
    ENDIF
ENDIF

ENDIF